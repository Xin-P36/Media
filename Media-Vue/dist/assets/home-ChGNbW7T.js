import{r as u,o as Qe,E as o,l as We,c as C,b as r,e as a,n as Xe,f as t,h as g,k as i,u as se,s as Ye,t as _,m as el,v as ll,p as k,q as E,x as al,i as tl,j as v}from"./index-DrTqUjeq.js";import{_ as sl,r as p}from"./_plugin-vue_export-helper-DzaqoFoA.js";import{g as ol}from"./toolCategory-NaEACP6i.js";const rl={class:"background-container"},nl=["src"],ul={class:"task-content"},il={key:1,class:"progress-container",style:{padding:"10px"}},dl={style:{display:"flex","align-items":"center","margin-bottom":"10px"}},cl={key:3,class:"progress-container",style:{padding:"10px"}},ml={style:{display:"flex","align-items":"center","margin-bottom":"10px"}},vl={key:0},pl={key:1},gl={key:5,class:"progress-container",style:{padding:"10px"}},fl={style:{display:"flex","align-items":"center","margin-bottom":"10px"}},yl={key:7,class:"progress-container",style:{padding:"10px"}},_l={style:{display:"flex","align-items":"center","margin-bottom":"10px"}},bl={key:9,class:"progress-container",style:{padding:"10px"}},kl={style:{display:"flex","align-items":"center","margin-bottom":"10px"}},hl={key:11,class:"progress-container",style:{padding:"10px"}},xl={style:{display:"flex","align-items":"center","margin-bottom":"10px"}},wl={style:{"text-align":"right",padding:"10px"}},Nl={style:{"margin-bottom":"10px"}},Vl={class:"video-preset-actions"},Tl={class:"video-preset-actions"},Pl={style:{"text-align":"right","padding-top":"10px"}},Cl={__name:"home",setup(Il){const oe=tl(),ee=u([]),F=u(""),A=u(50),z=u({nickName:"",avatar:"",homeBackground:""}),le=u({}),h=u(null),x=u(null),w=u(null),N=u(null),y=u(null),V=u(null),S=u(null),D=u(null),M=u(null),U=u(null),O=u(null),L=u(null),T=u([]),re=u([]),J=u(""),H=u(null),R=u(!1),n=u({name:"",container:"MP4",video:{codec:"libx265",bitrate:null,resolution:"",framerate:"",crf:"",speed:""},audio:{codec:"aac",bitrate:"128k"}}),m=u({account:"",nickName:"",avatar:"",thumbnailThreshold:"",width:"",height:"",loginBackground:"",homeBackground:""});Qe(async()=>{const e=JSON.parse(localStorage.getItem("userToken"));e&&(z.value=e,m.value={...e},le.value={...e});try{const B=await ol();B.code===200&&(ee.value=[{toolId:"",toolName:"无",children:[]},...B.data])}catch(B){console.error("获取分类数据失败:",B),o.error("获取分类数据失败")}const l=localStorage.getItem("defaultDisplay");l&&(F.value=isNaN(Number(l))?l:Number(l)),ge(),await ae();const f=localStorage.getItem("defaultNumberPages");f&&(A.value=parseInt(f,10))}),We(()=>{qe()});const ge=()=>{const e=localStorage.getItem("videoPresets");e?T.value=JSON.parse(e):(T.value=[{name:"4K",container:"MP4",video:{codec:"libx265",bitrate:"10Mbps",resolution:"3840x2160",framerate:"",crf:"",speed:""},audio:{codec:"aac",bitrate:"128k"}},{name:"2K",container:"MP4",video:{codec:"libx265",bitrate:"8Mbps",resolution:"2560x1440",framerate:"",crf:"",speed:""},audio:{codec:"aac",bitrate:"128k"}},{name:"1080P",container:"MP4",video:{codec:"libx265",bitrate:"6Mbps",resolution:"1920x1080",framerate:"",crf:"",speed:""},audio:{codec:"aac",bitrate:"128k"}}],localStorage.setItem("videoPresets",JSON.stringify(T.value)))},ae=async()=>{try{const e=await p({url:"/hide-list",method:"GET"});e.code===200?re.value=e.data||[]:o.error(e.message||"获取隐藏分类数据失败")}catch(e){console.error("获取隐藏分类数据失败:",e),o.error("获取隐藏分类数据失败")}};let Z=u(!1),$=u(null),K=u(!1);const ne=u(null),fe={account:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:4,max:20,message:"账号长度应在4到20个字符之间",trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:10,message:"昵称长度应在2到10个字符之间",trigger:"blur"}],avatar:[{required:!0,message:"请输入头像图片路径",trigger:"blur"}],thumbnailThreshold:[{required:!0,message:"请输入缩略图阈值",trigger:"blur"}],width:[{required:!0,message:"请输入缩略图生成质量",trigger:"blur"},{type:"number",min:1,max:99,message:"缩略图生成质量应在1到99之间",trigger:"blur"}],height:[{required:!0,message:"请输入封面开始时间",trigger:"blur"}],loginBackground:[{required:!0,message:"请输入登录背景图片路径",trigger:"blur"}],homeBackground:[{required:!0,message:"请输入主页背景图片路径",trigger:"blur"}]},ue=()=>{$.value&&(clearTimeout($.value),$.value=null),Z.value=!0},ie=()=>{$.value=setTimeout(()=>{Z.value=!1,$.value=null},100)},ye=()=>{oe.push("/show")},_e=()=>{oe.push("/finishing")},be=async()=>{try{await p.delete("/user/logout"),o.success("退出登录成功")}catch(e){o.error("退出登录失败: "+(e.message||"未知错误"))}finally{localStorage.removeItem("userToken"),window.location.reload()}},ke=()=>{K.value=!0,Z.value=!1},he=async()=>{try{await ne.value.validate();const e=await p.put("/user/update",m.value);if(e.code===200){o.success("用户爱好设置保存成功");const f={...JSON.parse(localStorage.getItem("userToken"))||{},...e.data};localStorage.setItem("userToken",JSON.stringify(f)),z.value=f,le.value={...m.value}}else o.error(e.message||"保存失败")}catch(e){console.error("保存用户爱好设置时出错:",e),o.error("保存用户爱好设置时出错")}},xe=()=>{m.value={...le.value},o.info("已取消用户爱好设置更改")},we=()=>{localStorage.setItem("defaultDisplay",F.value),o.success("首页展示分类设置保存成功")},Ne=()=>{const e=localStorage.getItem("defaultDisplay");e?F.value=isNaN(Number(e))?e:Number(e):F.value="",o.info("已取消首页展示分类设置更改")},Ve=()=>{localStorage.setItem("defaultNumberPages",A.value),o.success("首页默认加载条数设置保存成功")},Te=()=>{const e=localStorage.getItem("defaultNumberPages");e?A.value=parseInt(e,10):A.value=50,o.info("已取消首页默认加载条数设置更改")},de=()=>{localStorage.setItem("videoPresets",JSON.stringify(T.value)),o.success("视频预设保存成功")},Pe=()=>{n.value.video.crf&&(n.value.video.bitrate=null),H.value!==null?T.value[H.value]={...n.value}:T.value.push({...n.value}),de(),R.value=!1},Ce=e=>{H.value=e,n.value=JSON.parse(JSON.stringify(T.value[e])),R.value=!0},Ie=e=>{T.value.splice(e,1),de()},Ee=()=>{H.value=null,n.value={name:"",container:"MP4",video:{codec:"libx265",bitrate:null,resolution:"",framerate:"",crf:"",speed:""},audio:{codec:"aac",bitrate:"128k"}},R.value=!0},Se=async()=>{if(!J.value){o.warning("请选择要隐藏的分类");return}try{const e=await p({url:"/hide-list",method:"POST",data:{hideId:J.value}});e.code===200?(o.success("添加隐藏分类成功"),await ae(),J.value=""):o.error(e.message||"添加隐藏分类失败")}catch(e){console.error("添加隐藏分类失败:",e),o.error("添加隐藏分类失败")}},De=async e=>{try{const l=await p({url:`/hide-list/${e}`,method:"DELETE"});l.code===200?(o.success("删除隐藏分类成功"),await ae()):o.error(l.message||"删除隐藏分类失败")}catch(l){console.error("删除隐藏分类失败:",l),o.error("删除隐藏分类失败")}},Me=async()=>{try{const e=await p({url:"/task/start?type=MOVE",method:"POST"});e.code===200?(o.success("移动任务已启动"),h.value={status:"RUNNING",percentage:0,message:"",currentStep:""},Fe()):o.error("启动移动任务失败: "+e.message)}catch(e){o.error("启动移动任务异常: "+e.message)}},Ue=async()=>{try{const e=await p({url:"/task/start?type=TRANSCODE",method:"POST"});e.code===200?(o.success("视频转码任务已启动"),x.value={status:"RUNNING",percentage:0,message:"",currentStep:""},Ae()):o.error("启动视频转码任务失败: "+e.message)}catch(e){o.error("启动视频转码任务异常: "+e.message)}},Oe=async()=>{try{const e=await p({url:"/task/start?type=DELETE",method:"POST"});e.code===200?(o.success("删除任务已启动"),w.value={status:"RUNNING",percentage:0,message:"",currentStep:""},Re()):o.error("启动删除任务失败: "+e.message)}catch(e){o.error("启动删除任务异常: "+e.message)}},Le=async()=>{try{const e=await p({url:"/task/start?type=THUMBNAIL",method:"POST"});e.code===200?(o.success("缩略图任务已启动"),N.value={status:"RUNNING",percentage:0,message:"",currentStep:""},Ge()):o.error("启动缩略图任务失败: "+e.message)}catch(e){o.error("启动缩略图任务异常: "+e.message)}},Fe=()=>{S.value&&clearInterval(S.value),S.value=setInterval(async()=>{try{const e=await p({url:"/task/progress",method:"GET"});e.code===200?(h.value=e.data,(e.data.status==="COMPLETED"||e.data.status==="FAILED"||e.data.status==="CANCELED")&&(clearInterval(S.value),S.value=null)):console.error("获取移动任务进度失败:",e.message)}catch(e){console.error("获取移动任务进度异常:",e.message)}},2e3)},Ae=()=>{D.value&&clearInterval(D.value),D.value=setInterval(async()=>{try{const e=await p({url:"/task/progress",method:"GET"});e.code===200?(x.value=e.data,(e.data.status==="COMPLETED"||e.data.status==="FAILED"||e.data.status==="CANCELED")&&(clearInterval(D.value),D.value=null)):console.error("获取转码任务进度失败:",e.message)}catch(e){console.error("获取转码任务进度异常:",e.message)}},2e3)},Re=()=>{M.value&&clearInterval(M.value),M.value=setInterval(async()=>{try{const e=await p({url:"/task/progress",method:"GET"});e.code===200?(w.value=e.data,(e.data.status==="COMPLETED"||e.data.status==="FAILED"||e.data.status==="CANCELED")&&(clearInterval(M.value),M.value=null)):console.error("获取删除任务进度失败:",e.message)}catch(e){console.error("获取删除任务进度异常:",e.message)}},2e3)},Ge=()=>{U.value&&clearInterval(U.value),U.value=setInterval(async()=>{try{const e=await p({url:"/task/progress",method:"GET"});e.code===200?(N.value=e.data,(e.data.status==="COMPLETED"||e.data.status==="FAILED"||e.data.status==="CANCELED")&&(clearInterval(U.value),U.value=null)):console.error("获取缩略图任务进度失败:",e.message)}catch(e){console.error("获取缩略图任务进度异常:",e.message)}},2e3)},G=e=>{switch(e){case"COMPLETED":return"success";case"FAILED":case"CANCELED":return"exception";default:return null}},Q=async()=>{try{const e=await p({url:"/task/cancel",method:"POST"});e.code===200?o.success("取消请求已发送"):o.error("取消任务失败: "+e.message)}catch(e){o.error("取消任务异常: "+e.message)}},Be=async()=>{try{const e=await p({url:"/task/cancel",method:"POST"});e.code===200?o.success("取消请求已发送"):o.error("取消视频规范任务失败: "+e.message)}catch(e){o.error("取消视频规范任务异常: "+e.message)}},qe=()=>{S.value&&clearInterval(S.value),D.value&&clearInterval(D.value),M.value&&clearInterval(M.value),U.value&&clearInterval(U.value),O.value&&clearInterval(O.value),L.value&&clearInterval(L.value)},ze=async()=>{try{const e=await p({url:"/media/scan/start?path=TemporaryMedia",method:"POST"});e.code===200?(o.success("扫描任务已启动"),y.value={status:"RUNNING",totalFiles:0,processedFiles:0,percentage:0,currentFileName:"",message:"正在启动扫描任务"},Je()):o.error("启动扫描任务失败: "+e.message)}catch(e){o.error("启动扫描任务异常: "+e.message)}},Je=()=>{O.value&&clearInterval(O.value),O.value=setInterval(async()=>{try{const e=await p({url:"/media/scan/progress",method:"GET"});e.code===200?(y.value=e.data,(e.data.status==="COMPLETED"||e.data.status==="FAILED"||e.data.status==="CANCELED")&&(clearInterval(O.value),O.value=null)):console.error("获取扫描任务进度失败:",e.message)}catch(e){console.error("获取扫描任务进度异常:",e.message)}},2e3)},He=async()=>{try{const e=await p({url:"/media/scan/cancel",method:"POST"});e.code===200?o.success("取消请求已发送"):o.error("取消扫描任务失败: "+e.message)}catch(e){o.error("取消扫描任务异常: "+e.message)}},$e=async()=>{try{const e=await p({url:"/task/start?type=NORMALIZE_VIDEO",method:"POST"});e.code===200?(o.success("视频规范任务已启动"),V.value={status:"RUNNING",percentage:0,message:"",currentStep:""},Ke()):o.error("启动视频规范任务失败: "+e.message)}catch(e){o.error("启动视频规范任务异常: "+e.message)}},Ke=()=>{L.value&&clearInterval(L.value),L.value=setInterval(async()=>{try{const e=await p({url:"/task/progress",method:"GET"});e.code===200?(V.value=e.data,(e.data.status==="COMPLETED"||e.data.status==="FAILED"||e.data.status==="CANCELED")&&(clearInterval(L.value),L.value=null)):console.error("获取视频规范任务进度失败:",e.message)}catch(e){console.error("获取视频规范任务进度异常:",e.message)}},2e3)};return(e,l)=>{const f=g("el-col"),B=g("el-icon"),W=g("el-row"),d=g("el-button"),q=g("el-progress"),j=g("el-collapse-item"),b=g("el-input"),c=g("el-form-item"),X=g("el-input-number"),Y=g("el-form"),ce=g("el-tree-select"),I=g("el-table-column"),me=g("el-table"),je=g("el-collapse"),ve=g("el-dialog"),P=g("el-option"),te=g("el-select"),Ze=g("router-view");return v(),C("div",rl,[r("div",{class:"background",style:Xe({backgroundImage:"url("+z.value.homeBackground+")"})},null,4),a(W,{id:"home-top"},{default:t(()=>[a(f,{span:10,id:"home-top-1",class:"home-top-p",onClick:ye},{default:t(()=>l[24]||(l[24]=[i(" 首页 ",-1)])),_:1,__:[24]}),a(f,{span:2,id:"home-top-2",class:"home-top-p"},{default:t(()=>[a(B,null,{default:t(()=>[a(se(Ye))]),_:1})]),_:1}),a(f,{span:10,id:"home-top-4",class:"home-top-p",onClick:_e},{default:t(()=>l[25]||(l[25]=[i("整理",-1)])),_:1,__:[25]}),a(f,{span:1,style:{"text-align":"center"}},{default:t(()=>[i(_(z.value.nickName),1)]),_:1}),a(f,{span:1,id:"home-top-3",class:"home-top-p"},{default:t(()=>[r("div",{class:"avatar-container",onMouseenter:ue,onMouseleave:ie},[r("img",{src:z.value.avatar,alt:"用户头像",class:"avatar-image"},null,8,nl),el(r("div",{class:"avatar-menu",onMouseenter:ue,onMouseleave:ie},[r("ul",{class:"menu-list"},[r("li",{class:"menu-item",onClick:ke},"设置"),r("li",{class:"menu-item",onClick:be},"退出登录")])],544),[[ll,se(Z)]])],32)]),_:1})]),_:1}),a(ve,{modelValue:se(K),"onUpdate:modelValue":l[11]||(l[11]=s=>al(K)?K.value=s:K=s),title:"设置",width:"650px","header-align":"left"},{default:t(()=>[a(je,{"model-value":["0"]},{default:t(()=>[a(j,{title:"任务列表",name:"0"},{default:t(()=>[r("div",ul,[!V.value||V.value.status==="COMPLETED"?(v(),k(d,{key:0,type:"primary",onClick:$e,style:{width:"calc(100% - 20px)",margin:"10px"}},{default:t(()=>l[26]||(l[26]=[i(" 1.视频规范任务 ",-1)])),_:1,__:[26]})):(v(),C("div",il,[r("div",dl,[a(q,{percentage:V.value.percentage,status:G(V.value.status),"show-text":!1,style:{flex:"1"}},null,8,["percentage","status"]),V.value.status==="RUNNING"?(v(),k(d,{key:0,type:"warning",onClick:Be,style:{"margin-left":"10px"}},{default:t(()=>l[27]||(l[27]=[i("取消任务",-1)])),_:1,__:[27]})):E("",!0)]),r("p",null,_(V.value.message),1),r("p",null,_(V.value.currentStep),1)])),!y.value||y.value.status==="COMPLETED"||y.value.status==="IDLE"?(v(),k(d,{key:2,type:"primary",onClick:ze,style:{width:"calc(100% - 20px)",margin:"10px"}},{default:t(()=>l[28]||(l[28]=[i(" 2.初始化文件 ",-1)])),_:1,__:[28]})):(v(),C("div",cl,[r("div",ml,[a(q,{percentage:y.value.percentage,status:G(y.value.status),"show-text":!1,style:{flex:"1"}},null,8,["percentage","status"]),y.value.status==="RUNNING"?(v(),k(d,{key:0,type:"warning",onClick:He,style:{"margin-left":"10px"}},{default:t(()=>l[29]||(l[29]=[i("取消任务",-1)])),_:1,__:[29]})):E("",!0)]),r("p",null,_(y.value.message),1),y.value.currentFileName?(v(),C("p",vl,"正在处理: "+_(y.value.currentFileName),1)):E("",!0),y.value.processedFiles!==void 0&&y.value.totalFiles!==void 0?(v(),C("p",pl," 进度: "+_(y.value.processedFiles)+"/"+_(y.value.totalFiles),1)):E("",!0)])),!h.value||h.value.status==="COMPLETED"?(v(),k(d,{key:4,type:"primary",onClick:Me,style:{width:"calc(100% - 20px)",margin:"10px"}},{default:t(()=>l[30]||(l[30]=[i(" 启动移动任务 ",-1)])),_:1,__:[30]})):(v(),C("div",gl,[r("div",fl,[a(q,{percentage:h.value.percentage,status:G(h.value.status),"show-text":!1,style:{flex:"1"}},null,8,["percentage","status"]),h.value.status==="RUNNING"?(v(),k(d,{key:0,type:"warning",onClick:Q,style:{"margin-left":"10px"}},{default:t(()=>l[31]||(l[31]=[i("取消任务",-1)])),_:1,__:[31]})):E("",!0)]),r("p",null,_(h.value.message),1),r("p",null,_(h.value.currentStep),1)])),!x.value||x.value.status==="COMPLETED"?(v(),k(d,{key:6,type:"primary",onClick:Ue,style:{width:"calc(100% - 20px)",margin:"10px"}},{default:t(()=>l[32]||(l[32]=[i(" 执行视频转码任务 ",-1)])),_:1,__:[32]})):(v(),C("div",yl,[r("div",_l,[a(q,{percentage:x.value.percentage,status:G(x.value.status),"show-text":!1,style:{flex:"1"}},null,8,["percentage","status"]),x.value.status==="RUNNING"?(v(),k(d,{key:0,type:"warning",onClick:Q,style:{"margin-left":"10px"}},{default:t(()=>l[33]||(l[33]=[i("取消任务",-1)])),_:1,__:[33]})):E("",!0)]),r("p",null,_(x.value.message),1),r("p",null,_(x.value.currentStep),1)])),!N.value||N.value.status==="COMPLETED"?(v(),k(d,{key:8,type:"primary",onClick:Le,style:{width:"calc(100% - 20px)",margin:"10px"}},{default:t(()=>l[34]||(l[34]=[i(" 生成缩略图任务 ",-1)])),_:1,__:[34]})):(v(),C("div",bl,[r("div",kl,[a(q,{percentage:N.value.percentage,status:G(N.value.status),"show-text":!1,style:{flex:"1"}},null,8,["percentage","status"]),N.value.status==="RUNNING"?(v(),k(d,{key:0,type:"warning",onClick:Q,style:{"margin-left":"10px"}},{default:t(()=>l[35]||(l[35]=[i("取消任务",-1)])),_:1,__:[35]})):E("",!0)]),r("p",null,_(N.value.message),1),r("p",null,_(N.value.currentStep),1)])),!w.value||w.value.status==="COMPLETED"?(v(),k(d,{key:10,type:"primary",onClick:Oe,style:{width:"calc(100% - 20px)",margin:"10px"}},{default:t(()=>l[36]||(l[36]=[i(" 删除任务 ",-1)])),_:1,__:[36]})):(v(),C("div",hl,[r("div",xl,[a(q,{percentage:w.value.percentage,status:G(w.value.status),"show-text":!1,style:{flex:"1"}},null,8,["percentage","status"]),w.value.status==="RUNNING"?(v(),k(d,{key:0,type:"warning",onClick:Q,style:{"margin-left":"10px"}},{default:t(()=>l[37]||(l[37]=[i("取消任务",-1)])),_:1,__:[37]})):E("",!0)]),r("p",null,_(w.value.message),1),r("p",null,_(w.value.currentStep),1)]))])]),_:1}),a(j,{title:"用户爱好",name:"1"},{default:t(()=>[a(Y,{model:m.value,rules:fe,"label-width":"30%",ref_key:"formRef",ref:ne},{default:t(()=>[a(c,{label:"登录账号",prop:"account"},{default:t(()=>[a(b,{modelValue:m.value.account,"onUpdate:modelValue":l[0]||(l[0]=s=>m.value.account=s),maxlength:20,"show-word-limit":""},null,8,["modelValue"])]),_:1}),a(c,{label:"昵称",prop:"nickName"},{default:t(()=>[a(b,{modelValue:m.value.nickName,"onUpdate:modelValue":l[1]||(l[1]=s=>m.value.nickName=s),maxlength:10,"show-word-limit":""},null,8,["modelValue"])]),_:1}),a(c,{label:"头像图片",prop:"avatar"},{default:t(()=>[a(b,{modelValue:m.value.avatar,"onUpdate:modelValue":l[2]||(l[2]=s=>m.value.avatar=s),placeholder:"请输入头像图片路径"},null,8,["modelValue"])]),_:1}),a(c,{label:"缩略图阈值(字节)",prop:"thumbnailThreshold"},{default:t(()=>[a(X,{modelValue:m.value.thumbnailThreshold,"onUpdate:modelValue":l[3]||(l[3]=s=>m.value.thumbnailThreshold=s),min:0,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(c,{label:"缩略图生成质量",prop:"width"},{default:t(()=>[a(X,{modelValue:m.value.width,"onUpdate:modelValue":l[4]||(l[4]=s=>m.value.width=s),min:1,max:99,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(c,{label:"封面开始时间(秒)",prop:"height"},{default:t(()=>[a(X,{modelValue:m.value.height,"onUpdate:modelValue":l[5]||(l[5]=s=>m.value.height=s),min:0,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(c,{label:"登录背景",prop:"loginBackground"},{default:t(()=>[a(b,{modelValue:m.value.loginBackground,"onUpdate:modelValue":l[6]||(l[6]=s=>m.value.loginBackground=s),placeholder:"请输入登录背景图片路径"},null,8,["modelValue"])]),_:1}),a(c,{label:"主页背景",prop:"homeBackground"},{default:t(()=>[a(b,{modelValue:m.value.homeBackground,"onUpdate:modelValue":l[7]||(l[7]=s=>m.value.homeBackground=s),placeholder:"请输入主页背景图片路径"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),r("div",wl,[a(d,{onClick:xe},{default:t(()=>l[38]||(l[38]=[i("取消",-1)])),_:1,__:[38]}),a(d,{type:"primary",onClick:he},{default:t(()=>l[39]||(l[39]=[i("保存",-1)])),_:1,__:[39]})])]),_:1}),a(j,{title:"展示分类",name:"2"},{default:t(()=>[a(Y,null,{default:t(()=>[a(W,{gutter:10,align:"middle",style:{"margin-bottom":"15px"}},{default:t(()=>[a(f,{span:16},{default:t(()=>[a(c,{label:"首页展示的分类",style:{"margin-bottom":"0"}},{default:t(()=>[a(ce,{modelValue:F.value,"onUpdate:modelValue":l[8]||(l[8]=s=>F.value=s),data:ee.value,placeholder:"请选择首页展示的分类",style:{width:"100%"},"node-key":"toolId",props:{label:"toolName",children:"children"},"check-strictly":"",clearable:""},null,8,["modelValue","data"])]),_:1})]),_:1}),a(f,{span:8,style:{"text-align":"right"}},{default:t(()=>[a(d,{onClick:Ne},{default:t(()=>l[40]||(l[40]=[i("取消",-1)])),_:1,__:[40]}),a(d,{type:"primary",onClick:we},{default:t(()=>l[41]||(l[41]=[i("保存",-1)])),_:1,__:[41]})]),_:1})]),_:1}),a(W,{gutter:10,align:"middle"},{default:t(()=>[a(f,{span:16},{default:t(()=>[a(c,{label:"首页默认加载条数",style:{"margin-bottom":"0"}},{default:t(()=>[a(X,{modelValue:A.value,"onUpdate:modelValue":l[9]||(l[9]=s=>A.value=s),min:1,max:100,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),a(f,{span:8,style:{"text-align":"right"}},{default:t(()=>[a(d,{onClick:Te},{default:t(()=>l[42]||(l[42]=[i("取消",-1)])),_:1,__:[42]}),a(d,{type:"primary",onClick:Ve},{default:t(()=>l[43]||(l[43]=[i("保存",-1)])),_:1,__:[43]})]),_:1})]),_:1})]),_:1})]),_:1}),a(j,{title:"视频压缩设置",name:"3"},{default:t(()=>[r("div",Nl,[a(d,{type:"primary",onClick:Ee},{default:t(()=>l[44]||(l[44]=[i("添加预设",-1)])),_:1,__:[44]})]),a(me,{data:T.value,style:{width:"100%"},"max-height":"250",class:"video-presets-table"},{default:t(()=>[a(I,{prop:"name",label:"名称",width:"100"}),a(I,{prop:"video.resolution",label:"分辨率",width:"120"}),a(I,{prop:"video.bitrate",label:"码率",width:"100"}),a(I,{prop:"video.crf",label:"CRF",width:"60"}),a(I,{prop:"video.codec",label:"编码器",width:"100"}),a(I,{label:"操作",fixed:"right",width:"120"},{default:t(s=>[r("div",Vl,[a(d,{size:"small",onClick:pe=>Ce(s.$index)},{default:t(()=>l[45]||(l[45]=[i("编辑",-1)])),_:2,__:[45]},1032,["onClick"]),a(d,{size:"small",type:"danger",onClick:pe=>Ie(s.$index)},{default:t(()=>l[46]||(l[46]=[i("删除",-1)])),_:2,__:[46]},1032,["onClick"])])]),_:1})]),_:1},8,["data"])]),_:1}),a(j,{title:"隐藏分类管理",name:"4"},{default:t(()=>[a(Y,null,{default:t(()=>[a(c,{label:"添加隐藏分类"},{default:t(()=>[a(ce,{modelValue:J.value,"onUpdate:modelValue":l[10]||(l[10]=s=>J.value=s),data:ee.value,placeholder:"请选择要隐藏的分类",style:{width:"70%"},"node-key":"toolId",props:{label:"toolName",children:"children"},"check-strictly":"",clearable:""},null,8,["modelValue","data"]),a(d,{type:"primary",onClick:Se,style:{"margin-left":"10px"}},{default:t(()=>l[47]||(l[47]=[i("添加",-1)])),_:1,__:[47]})]),_:1}),a(c,{class:"hidden-categories-table"},{default:t(()=>[a(me,{data:re.value,style:{width:"100%"},"max-height":"250"},{default:t(()=>[a(I,{prop:"hideId",label:"分类ID",width:"100"}),a(I,{label:"操作",fixed:"right",width:"120"},{default:t(s=>[r("div",Tl,[a(d,{size:"small",type:"danger",onClick:pe=>De(s.row.id)},{default:t(()=>l[48]||(l[48]=[i("删除",-1)])),_:2,__:[48]},1032,["onClick"])])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ve,{modelValue:R.value,"onUpdate:modelValue":l[23]||(l[23]=s=>R.value=s),title:H.value!==null?"编辑预设":"添加预设",width:"500px"},{default:t(()=>[a(Y,{model:n.value,"label-width":"80px"},{default:t(()=>[a(c,{label:"名称"},{default:t(()=>[a(b,{modelValue:n.value.name,"onUpdate:modelValue":l[12]||(l[12]=s=>n.value.name=s)},null,8,["modelValue"])]),_:1}),a(c,{label:"容器"},{default:t(()=>[a(te,{modelValue:n.value.container,"onUpdate:modelValue":l[13]||(l[13]=s=>n.value.container=s),placeholder:"请选择容器",style:{width:"100%"}},{default:t(()=>[a(P,{label:"MP4",value:"MP4"}),a(P,{label:"MKV",value:"MKV"}),a(P,{label:"AVI",value:"AVI"})]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"编码器"},{default:t(()=>[a(te,{modelValue:n.value.video.codec,"onUpdate:modelValue":l[14]||(l[14]=s=>n.value.video.codec=s),placeholder:"请选择编码器",style:{width:"100%"}},{default:t(()=>[a(P,{label:"libx264",value:"libx264"}),a(P,{label:"libx265",value:"libx265"}),a(P,{label:"libvpx-vp9",value:"libvpx-vp9"})]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"码率"},{default:t(()=>[a(b,{modelValue:n.value.video.bitrate,"onUpdate:modelValue":l[15]||(l[15]=s=>n.value.video.bitrate=s),disabled:!!n.value.video.crf,placeholder:"例如: 8Mbps"},null,8,["modelValue","disabled"])]),_:1}),a(c,{label:"CRF"},{default:t(()=>[a(b,{modelValue:n.value.video.crf,"onUpdate:modelValue":l[16]||(l[16]=s=>n.value.video.crf=s),disabled:!!n.value.video.bitrate,placeholder:"0-51, 越小质量越好"},null,8,["modelValue","disabled"])]),_:1}),a(c,{label:"分辨率"},{default:t(()=>[a(b,{modelValue:n.value.video.resolution,"onUpdate:modelValue":l[17]||(l[17]=s=>n.value.video.resolution=s),placeholder:"例如: 1920x1080"},null,8,["modelValue"])]),_:1}),a(c,{label:"帧率"},{default:t(()=>[a(b,{modelValue:n.value.video.framerate,"onUpdate:modelValue":l[18]||(l[18]=s=>n.value.video.framerate=s)},null,8,["modelValue"])]),_:1}),a(c,{label:"速度"},{default:t(()=>[a(b,{modelValue:n.value.video.speed,"onUpdate:modelValue":l[19]||(l[19]=s=>n.value.video.speed=s),placeholder:"例如: medium, slow"},null,8,["modelValue"])]),_:1}),a(c,{label:"音频编码"},{default:t(()=>[a(te,{modelValue:n.value.audio.codec,"onUpdate:modelValue":l[20]||(l[20]=s=>n.value.audio.codec=s),placeholder:"请选择音频编码",style:{width:"100%"}},{default:t(()=>[a(P,{label:"aac",value:"aac"}),a(P,{label:"mp3",value:"mp3"}),a(P,{label:"flac",value:"flac"})]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"音频码率"},{default:t(()=>[a(b,{modelValue:n.value.audio.bitrate,"onUpdate:modelValue":l[21]||(l[21]=s=>n.value.audio.bitrate=s),placeholder:"例如: 128k, 256k"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),r("div",Pl,[a(d,{onClick:l[22]||(l[22]=s=>R.value=!1)},{default:t(()=>l[49]||(l[49]=[i("取消",-1)])),_:1,__:[49]}),a(d,{type:"primary",onClick:Pe},{default:t(()=>l[50]||(l[50]=[i("保存",-1)])),_:1,__:[50]})])]),_:1},8,["modelValue","title"]),a(W,null,{default:t(()=>[a(f,{span:24,class:"main-content"},{default:t(()=>[a(Ze)]),_:1})]),_:1})])}}},Ml=sl(Cl,[["__scopeId","data-v-5e5a5284"]]);export{Ml as default};
